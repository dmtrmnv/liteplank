<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LitePlank - –ü–ª–∞–Ω–∫–∞ —Ç—Ä–µ–∫–µ—Ä</title>
    <meta name="description" content="PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–ª–∞–Ω–∫–∏">
    <meta name="theme-color" content="#42b983">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Preload styles -->
    <link rel="preload" href="style.css?v=1.0.3" as="style">
    
    <style>
        /* –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --accent: #42b983;
            --accent-hover: #36a873;
            --danger: #dc3545;
            --warning: #ffc107;
            --border: #e9ecef;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent: #42d392;
            --accent-hover: #36c180;
            --danger: #ff6b6b;
            --warning: #ffd277;
            --border: #404040;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* –°–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ JS */
        #app { display: none; }
        .loading { display: flex; }

        /* –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }

        .notification {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 250px;
            animation: slideIn 0.3s ease-out;
            pointer-events: auto;
        }

        .notification-content {
            flex: 1;
            font-size: 14px;
            line-height: 1.4;
        }

        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .notification-close:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        .notification-info {
            border-left: 4px solid var(--accent);
        }

        .notification-success {
            border-left: 4px solid var(--accent);
        }

        .notification-error {
            border-left: 4px solid var(--danger);
        }

        .notification-warning {
            border-left: 4px solid var(--warning);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .notification-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }
            
            .notification {
                min-width: auto;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- –≠–ª–µ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading" class="loading" style="display: none; align-items: center; justify-content: center; height: 100vh; width: 100%;">
        <div style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ü´Å</div>
            <div style="font-size: 1.5rem; font-weight: bold; color: var(--accent);">LitePlank</div>
            <div style="color: var(--text-secondary); margin-top: 0.5rem;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav id="navbar" class="navbar">
            <div class="brand">
                <div class="brand-logo">ü´Å</div>
                <div class="brand-text">
                    <div class="brand-title">LitePlank</div>
                    <div class="brand-subtitle">–ü–ª–∞–Ω–∫–∞ —Ç—Ä–µ–∫–µ—Ä</div>
                </div>
            </div>
            
            <div class="tabs" id="tabs">
                <button class="tab-btn active" data-tab="timer">
                    <span class="tab-icon">‚è±Ô∏è</span>
                    <span class="tab-text">–¢–∞–π–º–µ—Ä</span>
                </button>
                <button class="tab-btn" data-tab="history">
                    <span class="tab-icon">üìä</span>
                    <span class="tab-text">–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
                <button class="tab-btn" data-tab="instructions">
                    <span class="tab-icon">üìñ</span>
                    <span class="tab-text">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                </button>
                <button class="tab-btn" data-tab="settings">
                    <span class="tab-icon">‚öôÔ∏è</span>
                    <span class="tab-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </div>
            
            <div class="actions">
                <button class="theme-btn" id="theme-toggle" title="–¢–µ–º–Ω–∞—è —Ç–µ–º–∞">
                    <span>üåô</span>
                </button>
            </div>
        </nav>

        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –≤–Ω–∏–∑—É -->
        <nav id="mobile-nav" class="mobile-nav">
            <div class="tabs" id="tabs">
                <button class="tab-btn active" data-tab="timer">
                    <span class="tab-icon">‚è±Ô∏è</span>
                    <span class="tab-text">–¢–∞–π–º–µ—Ä</span>
                </button>
                <button class="tab-btn" data-tab="history">
                    <span class="tab-icon">üìä</span>
                    <span class="tab-text">–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
                <button class="tab-btn" data-tab="instructions">
                    <span class="tab-icon">üìñ</span>
                    <span class="tab-text">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                </button>
                <button class="tab-btn" data-tab="settings">
                    <span class="tab-icon">‚öôÔ∏è</span>
                    <span class="tab-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <main class="main-content">
            <!-- –¢–∞–π–º–µ—Ä -->
            <section id="timer-section" class="section active">
                <div class="timer-container">
                    <div class="timer-display">
                        <div class="time" id="timer-display">01:00</div>
                    </div>
                    
                    <div class="controls">
                        <button id="start-btn" class="btn btn-start">–°—Ç–∞—Ä—Ç</button>
                        <button id="pause-btn" class="btn btn-pause" style="display: none;">–ü–∞—É–∑–∞</button>
                        <button id="finish-btn" class="btn btn-finish" style="display: none;">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                        <button id="reset-btn" class="btn btn-reset">–°–±—Ä–æ—Å</button>
                    </div>

                    <div class="settings">
                        <label>
                            –í—Ä–µ–º—è (—Å–µ–∫):
                            <input type="number" id="duration-input" value="60" min="1" max="3600">
                        </label>
                    </div>
                </div>
            </section>

            <!-- –ò—Å—Ç–æ—Ä–∏—è -->
            <section id="history-section" class="section">
                <div class="history-container">
                    <div class="history-header">
                        <h2>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>
                        <div class="stats">
                            <div class="stat-item">
                                <span class="stat-label">–í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫:</span>
                                <span class="stat-value" id="total-sessions">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–û–±—â–µ–µ –≤—Ä–µ–º—è:</span>
                                <span class="stat-value" id="total-time">0 —Å–µ–∫</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–°–æ–∂–∂–µ–Ω–æ –∫–∞–ª–æ—Ä–∏–π:</span>
                                <span class="stat-value" id="total-calories">0 –∫–∫–∞–ª</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–£–¥–µ—Ä–∂–∞–Ω–æ –∫–≥:</span>
                                <span class="stat-value" id="total-weight">0 –∫–≥</span>
                                <span class="stat-hint" title="–†–∞—Å—á–µ—Ç: –í–µ—Å √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫">‚ÑπÔ∏è</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:</span>
                                <span class="stat-value" id="avg-time">0 —Å–µ–∫</span>
                            </div>
                        </div>
                    </div>

                    <div class="history-list" id="history-list">
                        <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>

                    <div class="empty-state" id="empty-state">
                        <p>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø—É—Å—Ç–∞</p>
                        <p class="hint">–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∑–¥–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</p>
                    </div>

                    <div class="history-actions">
                        <button id="clear-history-btn" class="btn-clear">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    </div>
                </div>
            </section>


            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
            <section id="instructions-section" class="section">
                <div class="instructions-container">
                    <div class="instructions-header">
                        <h2>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –ø–ª–∞–Ω–∫–∏</h2>
                        <p class="subtitle">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</p>
                    </div>

                    <div class="instructions-content">
                        <div class="instruction-section">
                            <div class="section-title">üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</div>
                            <div class="technique-steps">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h3>–ò—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ</h3>
                                        <p>–í—Å—Ç–∞–Ω—å—Ç–µ –Ω–∞ —á–µ—Ç–≤–µ—Ä–µ–Ω—å–∫–∏, –ª–∞–¥–æ–Ω–∏ –ø–æ–¥ –ø–ª–µ—á–∞–º–∏, –Ω–æ–≥–∏ –Ω–∞ –Ω–æ—Å–∫–∞—Ö. –¢–µ–ª–æ –æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä—è–º—É—é –ª–∏–Ω–∏—é –æ—Ç –≥–æ–ª–æ–≤—ã –¥–æ –ø—è—Ç–æ–∫.</p>
                                    </div>
                                </div>
                                
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h3>–ü–æ–∑–∏—Ü–∏—è —Ç–µ–ª–∞</h3>
                                        <p>–°–ø–∏–Ω–∞ –ø—Ä—è–º–∞—è, –Ω–µ –ø—Ä–æ–≥–∏–±–∞–π—Ç–µ –ø–æ—è—Å–Ω–∏—Ü—É –∏ –Ω–µ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ —Ç–∞–∑. –ì–æ–ª–æ–≤–∞ –≤ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏, —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–æ–ª –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π.</p>
                                    </div>
                                </div>
                                
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h3>–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –º—ã—à—Ü</h3>
                                        <p>–ù–∞–ø—Ä—è–≥–∏—Ç–µ —è–≥–æ–¥–∏—Ü—ã, –±–µ–¥—Ä–∞ –∏ –ø—Ä–µ—Å—Å. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞—Ç—è–≥–∏–≤–∞–µ—Ç–µ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ –º–µ–∂–¥—É –ª–æ–ø–∞—Ç–∫–∞–º–∏.</p>
                                    </div>
                                </div>
                                
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h3>–î—ã—Ö–∞–Ω–∏–µ</h3>
                                        <p>–î—ã—à–∏—Ç–µ —Ä–æ–≤–Ω–æ –∏ –≥–ª—É–±–æ–∫–æ —á–µ—Ä–µ–∑ –Ω–æ—Å. –ù–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –¥—ã—Ö–∞–Ω–∏–µ. –ï—Å–ª–∏ —Å–ª–æ–∂–Ω–æ - –¥—ã—à–∏—Ç–µ —á–µ—Ä–µ–∑ —Ä–æ—Ç.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="instruction-section">
                            <div class="section-title">‚ö†Ô∏è –û—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å</div>
                            <div class="mistakes-grid">
                                <div class="mistake-card">
                                    <div class="mistake-icon">‚ùå</div>
                                    <div class="mistake-content">
                                        <h3>–ü—Ä–æ–≥–∏–± –≤ –ø–æ—è—Å–Ω–∏—Ü–µ</h3>
                                        <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã —Ç–∞–∑ –Ω–µ –æ–ø—É—Å–∫–∞–ª—Å—è. –ù–∞–ø—Ä—è–≥–∞–π—Ç–µ —è–≥–æ–¥–∏—Ü—ã –∏ –Ω–∏–∂–Ω–∏–π –ø—Ä–µ—Å—Å.</p>
                                    </div>
                                </div>
                                
                                <div class="mistake-card">
                                    <div class="mistake-icon">‚ùå</div>
                                    <div class="mistake-content">
                                        <h3>–ü–æ–¥–Ω—è—Ç—ã–π —Ç–∞–∑</h3>
                                        <p>–¢–∞–∑ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—à–µ —É—Ä–æ–≤–Ω—è —Å–ø–∏–Ω—ã. –¢–µ–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–µ–π.</p>
                                    </div>
                                </div>
                                
                                <div class="mistake-card">
                                    <div class="mistake-icon">‚ùå</div>
                                    <div class="mistake-content">
                                        <h3>–û–ø—É—â–µ–Ω–Ω–∞—è –≥–æ–ª–æ–≤–∞</h3>
                                        <p>–ù–µ –æ–ø—É—Å–∫–∞–π—Ç–µ –≥–æ–ª–æ–≤—É. –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–æ–ª –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π, —à–µ—è –≤ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏ —Å–æ —Å–ø–∏–Ω–æ–π.</p>
                                    </div>
                                </div>
                                
                                <div class="mistake-card">
                                    <div class="mistake-icon">‚ùå</div>
                                    <div class="mistake-content">
                                        <h3>–°–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞</h3>
                                        <p>–†—É–∫–∏ –∏ –Ω–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–ª–µ—á. –°–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="instruction-section">
                            <div class="section-title">üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã</div>
                            <div class="tips-list">
                                <div class="tip">
                                    <div class="tip-icon">‚ú®</div>
                                    <div class="tip-content">
                                        <h3>–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤</h3>
                                        <p>–ù–∞—á–Ω–∏—Ç–µ —Å 20-30 —Å–µ–∫—É–Ω–¥, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—è –≤—Ä–µ–º—è. –ì–ª–∞–≤–Ω–æ–µ - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞.</p>
                                    </div>
                                </div>
                                
                                <div class="tip">
                                    <div class="tip-icon">‚ú®</div>
                                    <div class="tip-content">
                                        <h3>–†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
                                        <p>–õ—É—á—à–µ —Å—Ç–æ—è—Ç—å 30 —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, —á–µ–º 5 –º–∏–Ω—É—Ç —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é.</p>
                                    </div>
                                </div>
                                
                                <div class="tip">
                                    <div class="tip-icon">‚ú®</div>
                                    <div class="tip-content">
                                        <h3>–°–ª—É—à–∞–π—Ç–µ —Å–≤–æ–µ —Ç–µ–ª–æ</h3>
                                        <p>–ï—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –±–æ–ª—å (–Ω–µ –º—ã—à–µ—á–Ω–æ–µ –∂–∂–µ–Ω–∏–µ), –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å. –ë–æ–ª—å - —ç—Ç–æ —Å–∏–≥–Ω–∞–ª –æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–µ.</p>
                                    </div>
                                </div>
                                
                                <div class="tip">
                                    <div class="tip-icon">‚ú®</div>
                                    <div class="tip-content">
                                        <h3>–ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏</h3>
                                        <p>–ü–ª–∞–Ω–∫–∞ –æ—Ç–ª–∏—á–Ω–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –æ—Ç–∂–∏–º–∞–Ω–∏—è–º–∏, –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="instruction-section">
                            <div class="section-title">üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è</div>
                            <div class="safety-list">
                                <div class="safety-item">
                                    <div class="safety-icon">‚ö†Ô∏è</div>
                                    <div class="safety-content">
                                        <h3>–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è</h3>
                                        <ul>
                                            <li>–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–ø–æ—Å–ª–µ 1 —Ç—Ä–∏–º–µ—Å—Ç—Ä–∞)</li>
                                            <li>–ì—Ä—ã–∂–∏ –∏ –ø—Ä–æ—Ç—Ä—É–∑–∏–∏</li>
                                            <li>–°–∏–ª—å–Ω—ã–µ –±–æ–ª–∏ –≤ —Å–ø–∏–Ω–µ</li>
                                            <li>–ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="safety-item">
                                    <div class="safety-icon">‚ö†Ô∏è</div>
                                    <div class="safety-content">
                                        <h3>–ö–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è</h3>
                                        <ul>
                                            <li>–ï—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—Å—Ç—Ä–∞—è –±–æ–ª—å</li>
                                            <li>–ï—Å–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∫—Ä—É–∂–∏—Ç—å—Å—è –≥–æ–ª–æ–≤–∞</li>
                                            <li>–ï—Å–ª–∏ –¥—ã—Ö–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–º</li>
                                            <li>–ï—Å–ª–∏ –º—ã—à—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç —Å–∏–ª—å–Ω–æ –¥—Ä–æ–∂–∞—Ç—å</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="instruction-section">
                            <div class="section-title">üìà –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è</div>
                            <div class="progression-grid">
                                <div class="progression-card">
                                    <div class="progression-level">–ù–∞—á–∏–Ω–∞—é—â–∏–π</div>
                                    <div class="progression-time">20-60 —Å–µ–∫</div>
                                    <div class="progression-desc">3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 20-30 —Å–µ–∫—É–Ω–¥</div>
                                </div>
                                
                                <div class="progression-card">
                                    <div class="progression-level">–°—Ä–µ–¥–Ω–∏–π</div>
                                    <div class="progression-time">60-120 —Å–µ–∫</div>
                                    <div class="progression-desc">3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 45-60 —Å–µ–∫—É–Ω–¥</div>
                                </div>
                                
                                <div class="progression-card">
                                    <div class="progression-level">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</div>
                                    <div class="progression-time">120+ —Å–µ–∫</div>
                                    <div class="progression-desc">3 –ø–æ–¥—Ö–æ–¥–∞ –ø–æ 90+ —Å–µ–∫—É–Ω–¥</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <section id="settings-section" class="section">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                        <p class="subtitle">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
                    </div>

                    <div class="settings-content">
                        <div class="settings-section">
                            <div class="section-title">‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                            
        <div class="setting-item">
            <label class="setting-label">
                <span>–ü–æ–ª</span>
                <select id="userGender" class="setting-input" style="width: 120px;">
                    <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                    <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
                </select>
            </label>
        </div>
        <div class="setting-item">
            <label class="setting-label">
                <span>–í–µ—Å (–∫–≥)</span>
                <input type="number" id="userWeight" class="setting-input" min="30" max="200" step="0.1" value="70">
            </label>
        </div>
        <div class="setting-item">
            <label class="setting-label">
                <span>–†–æ—Å—Ç (—Å–º)</span>
                <input type="number" id="userHeight" class="setting-input" min="140" max="220" step="1" value="175">
            </label>
        </div>
        <div class="setting-item">
            <label class="setting-label">
                <span>–í–æ–∑—Ä–∞—Å—Ç</span>
                <input type="number" id="userAge" class="setting-input" min="14" max="80" step="1" value="30">
            </label>
        </div>
        <div class="setting-item">
            <button id="save-user-settings-btn" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</button>
        </div>
        
        <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –≤–∏–¥–∂–µ—Ç—ã -->
        <div id="notification-container" class="notification-container"></div>

                            <div class="setting-item">
                                <label class="setting-label">
                                    <span>–ó–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª</span>
                                    <input type="checkbox" id="sound-enabled" checked class="setting-checkbox">
                                </label>
                            </div>

                            <div class="setting-item">
                                <label class="setting-label">
                                    <span>–í–∏–±—Ä–∞—Ü–∏—è</span>
                                    <input type="checkbox" id="vibration-enabled" checked class="setting-checkbox">
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="section-title">üíæ –î–∞–Ω–Ω—ã–µ</div>
                            
                            <div class="data-actions">
                                <button id="export-btn" class="btn-export">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                                <label class="btn-import">
                                    –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                                    <input type="file" id="import-input" accept=".json" style="display: none;">
                                </label>
                            </div>

                            <div class="data-info">
                                <p>–≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –≤–∞—à–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª JSON.</p>
                                <p>–ò–º–ø–æ—Ä—Ç –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞.</p>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="section-title">üîß –°–±—Ä–æ—Å</div>
                            
                            <div class="reset-actions">
                                <button id="clear-all-btn" class="btn-danger">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
                                <button id="reset-settings-btn" class="btn-warning">–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                            </div>

                            <div class="reset-info">
                                <p><strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —É–¥–∞–ª–∏—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ —Å–±—Ä–æ—Å–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.</p>
                                <p>–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="style.css?v=1.0.3">

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π JavaScript -->
    <script>
        // LitePlank - –ß–∏—Å—Ç—ã–π JavaScript PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        class LitePlank {
            constructor() {
                this.history = [];
                this.settings = {
                    defaultDuration: 60,
                    soundEnabled: true,
                    vibrationEnabled: true,
                    darkMode: false
                };
                this.currentSession = {
                    isRunning: false,
                    timeLeft: 0,
                    duration: 60,
                    timer: null
                };
                
                this.init();
            }

            showNotification(message, type = 'info') {
                const container = document.getElementById('notification-container');
                if (!container) return;

                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <div class="notification-content">${message}</div>
                    <button class="notification-close" onclick="this.parentElement.remove()">&times;</button>
                `;

                container.appendChild(notification);

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 3000);
            }

            init() {
                this.loadSettings();
                this.loadHistory();
                this.setupEventListeners();
                this.render();
                this.setupServiceWorker();
                
                // –°–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                document.getElementById('loading').style.display = 'none';
                document.getElementById('app').style.display = 'block';
            }

            setupEventListeners() {
                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchTab(e.target.closest('.tab-btn').dataset.tab);
                    });
                });

                // –¢–µ–º–∞
                const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', () => {
                        this.toggleTheme();
                    });
                }

                // –¢–∞–π–º–µ—Ä
                const startBtn = document.getElementById('start-btn');
                const pauseBtn = document.getElementById('pause-btn');
                const finishBtn = document.getElementById('finish-btn');
                const resetBtn = document.getElementById('reset-btn');
                const durationInput = document.getElementById('duration-input');

                if (startBtn) startBtn.addEventListener('click', () => this.startTimer());
                if (pauseBtn) pauseBtn.addEventListener('click', () => this.pauseTimer());
                if (finishBtn) finishBtn.addEventListener('click', () => this.finishEarly());
                if (resetBtn) resetBtn.addEventListener('click', () => this.resetTimer());
                if (durationInput) durationInput.addEventListener('change', (e) => {
                    this.currentSession.duration = Math.max(0, parseInt(e.target.value) || 0);
                    this.currentSession.timeLeft = this.currentSession.duration;
                    this.updateTimerDisplay();
                });

                // –ò—Å—Ç–æ—Ä–∏—è
                const clearHistoryBtn = document.getElementById('clear-history-btn');
                if (clearHistoryBtn) clearHistoryBtn.addEventListener('click', () => this.clearHistory());

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                const saveUserSettingsBtn = document.getElementById('save-user-settings-btn');
                if (saveUserSettingsBtn) saveUserSettingsBtn.addEventListener('click', () => this.saveUserSettings());
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                const userGender = document.getElementById('userGender');
                const userWeight = document.getElementById('userWeight');
                const userHeight = document.getElementById('userHeight');
                const userAge = document.getElementById('userAge');
                
                if (userGender) userGender.addEventListener('change', () => this.recalculateHistory());
                if (userWeight) userWeight.addEventListener('change', () => this.recalculateHistory());
                if (userHeight) userHeight.addEventListener('change', () => this.recalculateHistory());
                if (userAge) userAge.addEventListener('change', () => this.recalculateHistory());

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                const defaultDuration = document.getElementById('default-duration');
                const soundEnabled = document.getElementById('sound-enabled');
                const vibrationEnabled = document.getElementById('vibration-enabled');
                const exportBtn = document.getElementById('export-btn');
                const importInput = document.getElementById('import-input');
                const clearAllBtn = document.getElementById('clear-all-btn');
                const resetSettingsBtn = document.getElementById('reset-settings-btn');

                if (defaultDuration) defaultDuration.addEventListener('change', (e) => {
                    this.settings.defaultDuration = parseInt(e.target.value);
                    this.saveSettings();
                });

                if (soundEnabled) soundEnabled.addEventListener('change', (e) => {
                    this.settings.soundEnabled = e.target.checked;
                    this.saveSettings();
                });

                if (vibrationEnabled) vibrationEnabled.addEventListener('change', (e) => {
                    this.settings.vibrationEnabled = e.target.checked;
                    this.saveSettings();
                });

                if (exportBtn) exportBtn.addEventListener('click', () => this.exportData());
                if (importInput) importInput.addEventListener('change', (e) => this.importData(e));
                if (clearAllBtn) clearAllBtn.addEventListener('click', () => this.clearAllData());
                if (resetSettingsBtn) resetSettingsBtn.addEventListener('click', () => this.resetSettings());
            }

            switchTab(tabName) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–±—ã
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.tab === tabName);
                });

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.toggle('active', section.id === `${tabName}-section`);
                });
            }

            startTimer() {
                if (this.currentSession.timeLeft <= 0) {
                    this.currentSession.timeLeft = this.currentSession.duration;
                }
                
                this.currentSession.isRunning = true;
                this.updateTimerControls();
                
                this.currentSession.timer = setInterval(() => {
                    if (this.currentSession.timeLeft > 0) {
                        this.currentSession.timeLeft--;
                        this.updateTimerDisplay();
                    } else {
                        this.completeTimer();
                    }
                }, 1000);
            }

            pauseTimer() {
                this.currentSession.isRunning = false;
                if (this.currentSession.timer) {
                    clearInterval(this.currentSession.timer);
                    this.currentSession.timer = null;
                }
                this.updateTimerControls();
            }

            resetTimer() {
                this.pauseTimer();
                this.currentSession.timeLeft = this.currentSession.duration;
                this.updateTimerDisplay();
            }

            finishEarly() {
                this.pauseTimer();
                const actualDuration = this.currentSession.duration - this.currentSession.timeLeft;
                this.addSession(actualDuration);
                this.playSound();
                this.vibrate();
            }

            completeTimer() {
                this.pauseTimer();
                this.addSession(this.currentSession.duration);
                this.playSound();
                this.vibrate();
            }

            addSession(duration) {
                const session = {
                    date: new Date().toISOString(),
                    duration: duration,
                    calories: this.calculateCalories(duration)
                };
                this.history.unshift(session);
                this.saveHistory();
                this.updateHistory();
            }

            calculateCalories(seconds) {
    const weight = parseFloat(document.getElementById('userWeight')?.value || 70);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    if (isNaN(weight) || weight <= 0) {
        return 0;
    }
    
    // MET –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø–ª–∞–Ω–∫–∏ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º)
    const met = 3.5; 
    const minutes = seconds / 60;
    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: (MET * 3.5 * –≤–µ—Å –≤ –∫–≥) / 200 * –º–∏–Ω—É—Ç—ã
    const caloriesPerMinute = (met * 3.5 * weight) / 200;
    return caloriesPerMinute * minutes;
}

            playSound() {
                if (!this.settings.soundEnabled) return;
                
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –∞—É–¥–∏–æ
                }
            }

            vibrate() {
                if (!this.settings.vibrationEnabled || !navigator.vibrate) return;
                navigator.vibrate([100, 50, 100]);
            }

            updateTimerDisplay() {
                const minutes = Math.floor(this.currentSession.timeLeft / 60);
                const seconds = this.currentSession.timeLeft % 60;
                const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('timer-display').textContent = timeStr;
            }


            updateTimerControls() {
                const startBtn = document.getElementById('start-btn');
                const pauseBtn = document.getElementById('pause-btn');
                const finishBtn = document.getElementById('finish-btn');
                
                if (this.currentSession.isRunning) {
                    startBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-block';
                    finishBtn.style.display = 'inline-block';
                } else {
                    startBtn.style.display = 'inline-block';
                    pauseBtn.style.display = 'none';
                    finishBtn.style.display = 'none';
                }
            }

            updateHistory() {
                const historyList = document.getElementById('history-list');
                const emptyState = document.getElementById('empty-state');
                
                if (this.history.length === 0) {
                    historyList.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
                const recentHistory = this.history.slice(0, 10);
                historyList.innerHTML = recentHistory.map((session, index) => `
                    <div class="history-item">
                        <div class="session-info">
                            <div class="session-date">${this.formatDate(session.date)}</div>
                            <div class="session-duration">${this.formatTime(session.duration)}</div>
                            <div class="session-calories">${session.calories.toFixed(1)} –∫–∫–∞–ª</div>
                        </div>
                        <div class="session-actions">
                            <button class="btn-delete" onclick="litePlank.deleteSession(${index})" title="–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É">üóëÔ∏è</button>
                        </div>
                    </div>
                `).join('');

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                this.updateHistoryStats();
            }

            updateHistoryStats() {
                const totalSessions = this.history.length;
                const totalTime = this.history.reduce((sum, session) => sum + session.duration, 0);
                const totalCalories = this.history.reduce((sum, session) => sum + session.calories, 0);
                const avgTime = totalSessions > 0 ? Math.round(totalTime / totalSessions) : 0;
                
                // –ü–æ–ª—É—á–∞–µ–º –≤–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userWeight = parseFloat(document.getElementById('userWeight')?.value || 70);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                if (isNaN(userWeight) || userWeight <= 0) {
                    document.getElementById('total-weight').textContent = '0 –∫–≥';
                } else {
                    // –£–¥–µ—Ä–∂–∞–Ω–æ –∫–≥ = –í–µ—Å √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
                    const totalWeight = userWeight * totalSessions;
                    document.getElementById('total-weight').textContent = `${totalWeight.toFixed(1)} –∫–≥`;
                }

                document.getElementById('total-sessions').textContent = totalSessions;
                document.getElementById('total-time').textContent = this.formatTotalTime(totalTime);
                document.getElementById('total-calories').textContent = `${totalCalories.toFixed(1)} –∫–∫–∞–ª`;
                document.getElementById('avg-time').textContent = this.formatAverageTime(avgTime);
            }

            deleteSession(index) {
                if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?')) {
                    this.history.splice(index, 1);
                    this.saveHistory();
                    this.updateHistory();
                    this.showNotification('–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞', 'success');
                }
            }

            clearHistory() {
                if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫?')) {
                    this.history = [];
                    this.saveHistory();
                    this.updateHistory();
                    this.showNotification('–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –æ—á–∏—â–µ–Ω–∞', 'success');
                }
            }

            updateProgress() {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                const totalSessions = this.history.length;
                const totalTime = this.history.reduce((sum, session) => sum + session.duration, 0);
                const avgTime = totalSessions > 0 ? Math.round(totalTime / totalSessions) : 0;

                document.getElementById('progress-sessions').textContent = totalSessions;
                document.getElementById('progress-total').textContent = this.formatTime(totalTime);
                document.getElementById('progress-avg').textContent = this.formatTime(avgTime);

                // –û–±–Ω–æ–≤–ª—è–µ–º –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                const bestSession = this.history.length > 0 ? 
                    this.history.reduce((best, current) => current.duration > best.duration ? current : best) : null;
                
                document.getElementById('best-result').textContent = bestSession ? this.formatTime(bestSession.duration) : '0';
                document.getElementById('best-date').textContent = bestSession ? this.formatDate(bestSession.date) : '-';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç—Ä–µ–Ω–¥
                this.updateTrend();

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                this.updateRecommendations();

                // –†–∏—Å—É–µ–º –≥—Ä–∞—Ñ–∏–∫
                this.renderChart();
            }

            updateTrend() {
                let trend = 'neutral';
                let trendValue = 0;

                if (this.history.length >= 3) {
                    const recent = this.history.slice(-5);
                    const older = this.history.slice(-10, -5);
                    
                    if (older.length > 0) {
                        const recentAvg = recent.reduce((sum, s) => sum + s.duration, 0) / recent.length;
                        const olderAvg = older.reduce((sum, s) => sum + s.duration, 0) / older.length;
                        const diff = recentAvg - olderAvg;
                        const diffPercent = (diff / olderAvg) * 100;
                        
                        if (diffPercent > 10) trend = 'improving';
                        else if (diffPercent < -10) trend = 'declining';
                        else trend = 'stable';
                        
                        trendValue = Math.round(recentAvg);
                    }
                }

                const indicator = document.getElementById('trend-indicator');
                const value = document.getElementById('trend-value');

                indicator.className = 'trend-indicator';
                indicator.textContent = this.getTrendText(trend);
                indicator.classList.add(`trend-${trend}`);
                value.textContent = this.formatTime(trendValue);
            }

            getTrendText(trend) {
                switch (trend) {
                    case 'improving': return 'üìà –£–ª—É—á—à–∞–µ—Ç—Å—è';
                    case 'declining': return 'üìâ –°–Ω–∏–∂–∞–µ—Ç—Å—è';
                    case 'stable': return '‚û°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ';
                    default: return '‚ùì –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
                }
            }

            updateRecommendations() {
                const container = document.getElementById('recommendations');
                
                if (this.history.length === 0) {
                    container.innerHTML = '<div class="recommendation">üéØ –ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!</div>';
                } else if (this.history.length < 5) {
                    container.innerHTML = '<div class="recommendation">üìà –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è</div>';
                } else {
                    const recent = this.history.slice(-5);
                    const older = this.history.slice(-10, -5);
                    
                    if (older.length > 0) {
                        const recentAvg = recent.reduce((sum, s) => sum + s.duration, 0) / recent.length;
                        const olderAvg = older.reduce((sum, s) => sum + s.duration, 0) / older.length;
                        const diff = recentAvg - olderAvg;
                        const diffPercent = (diff / olderAvg) * 100;
                        
                        if (diffPercent > 10) {
                            container.innerHTML = '<div class="recommendation">üöÄ –û—Ç–ª–∏—á–Ω–æ! –í—ã —É–ª—É—á—à–∞–µ—Ç–µ—Å—å!</div>';
                        } else if (diffPercent < -10) {
                            container.innerHTML = '<div class="recommendation">üîÑ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è</div>';
                        } else {
                            container.innerHTML = '<div class="recommendation">üí™ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>';
                        }
                    } else {
                        container.innerHTML = '<div class="recommendation">üí™ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>';
                    }
                }
            }

            renderChart() {
                const container = document.getElementById('chart-container');
                const recentSessions = this.history.slice(-10).reverse();
                
                if (recentSessions.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: var(--text-secondary); padding: 2rem;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>';
                    return;
                }

                const maxDuration = Math.max(...recentSessions.map(s => s.duration));
                
                container.innerHTML = recentSessions.map((session, index) => `
                    <div class="chart-bar" style="height: ${(session.duration / maxDuration) * 100}%" title="${this.formatDate(session.date)}: ${this.formatTime(session.duration)}">
                        <div class="bar-label">${this.formatTime(session.duration)}</div>
                    </div>
                `).join('');
            }

            toggleTheme() {
                this.settings.darkMode = !this.settings.darkMode;
                document.documentElement.setAttribute('data-theme', this.settings.darkMode ? 'dark' : 'light');
                document.getElementById('theme-toggle').innerHTML = `<span>${this.settings.darkMode ? '‚òÄÔ∏è' : 'üåô'}</span>`;
                this.saveSettings();
            }

            exportData() {
                const data = {
                    history: this.history,
                    settings: this.settings,
                    exportDate: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `liteplank-backup-${new Date().toISOString().slice(0, 10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            importData(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.history && Array.isArray(data.history)) {
                            if (confirm('–≠—Ç–æ –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                                this.history = data.history;
                                if (data.settings) {
                                    this.settings = data.settings;
                                    this.applySettings();
                                }
                                this.saveHistory();
                                this.saveSettings();
                                this.render();
                                this.showNotification('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
                            }
                        } else {
                            this.showNotification('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞', 'error');
                        }
                    } catch (error) {
                        this.showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞', 'error');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            }

            clearAllData() {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                    this.history = [];
                    this.resetSettings();
                    this.saveHistory();
                    this.render();
                    this.showNotification('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã', 'success');
                }
            }

            resetSettings() {
                this.settings = {
                    defaultDuration: 60,
                    soundEnabled: true,
                    vibrationEnabled: true,
                    darkMode: false
                };
                this.applySettings();
                this.saveSettings();
                this.showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã', 'success');
            }

            applySettings() {
                const defaultDurationEl = document.getElementById('default-duration');
                const soundEnabledEl = document.getElementById('sound-enabled');
                const vibrationEnabledEl = document.getElementById('vibration-enabled');
                const themeToggleEl = document.getElementById('theme-toggle');
                
                if (defaultDurationEl) defaultDurationEl.value = this.settings.defaultDuration;
                if (soundEnabledEl) soundEnabledEl.checked = this.settings.soundEnabled;
                if (vibrationEnabledEl) vibrationEnabledEl.checked = this.settings.vibrationEnabled;
                document.documentElement.setAttribute('data-theme', this.settings.darkMode ? 'dark' : 'light');
                if (themeToggleEl) themeToggleEl.innerHTML = `<span>${this.settings.darkMode ? '‚òÄÔ∏è' : 'üåô'}</span>`;
            }

            saveSettings() {
                localStorage.setItem('liteplank-settings', JSON.stringify(this.settings));
            }

            loadSettings() {
                const saved = localStorage.getItem('liteplank-settings');
                if (saved) {
                    this.settings = JSON.parse(saved);
                    this.applySettings();
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                this.loadUserSettings();
            }

            saveUserSettings() {
                const userSettings = {
                    gender: document.getElementById('userGender')?.value || 'male',
                    weight: parseFloat(document.getElementById('userWeight')?.value || 70),
                    height: parseFloat(document.getElementById('userHeight')?.value || 175),
                    age: parseInt(document.getElementById('userAge')?.value || 30)
                };
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                if (isNaN(userSettings.weight) || isNaN(userSettings.height) || isNaN(userSettings.age) || 
                    userSettings.weight <= 0 || userSettings.height <= 0 || userSettings.age <= 0) {
                    this.showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Å–∞, —Ä–æ—Å—Ç–∞ –∏ –≤–æ–∑—Ä–∞—Å—Ç–∞', 'error');
                    return;
                }
                
                localStorage.setItem('liteplank-user-settings', JSON.stringify(userSettings));
                this.showNotification('–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
                
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
                this.recalculateHistory();
            }

            loadUserSettings() {
                const saved = localStorage.getItem('liteplank-user-settings');
                if (saved) {
                    const userSettings = JSON.parse(saved);
                    
                    const genderEl = document.getElementById('userGender');
                    const weightEl = document.getElementById('userWeight');
                    const heightEl = document.getElementById('userHeight');
                    const ageEl = document.getElementById('userAge');
                    
                    if (genderEl) genderEl.value = userSettings.gender || 'male';
                    if (weightEl) weightEl.value = userSettings.weight || 70;
                    if (heightEl) heightEl.value = userSettings.height || 175;
                    if (ageEl) ageEl.value = userSettings.age || 30;
                }
            }

            saveHistory() {
                localStorage.setItem('liteplank-history', JSON.stringify(this.history));
            }

            loadHistory() {
                const saved = localStorage.getItem('liteplank-history');
                if (saved) {
                    this.history = JSON.parse(saved);
                }
            }

            recalculateHistory() {
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–ª–æ—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
                this.history.forEach(session => {
                    session.calories = this.calculateCalories(session.duration);
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
                this.saveHistory();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                this.updateHistory();
            }

            render() {
                this.currentSession.duration = this.settings.defaultDuration;
                this.currentSession.timeLeft = this.currentSession.duration;
                this.updateTimerDisplay();
                this.updateTimerControls();
                this.updateHistory();
            }

            formatTime(seconds) {
                if (seconds < 60) return `${seconds} —Å–µ–∫`;
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins} –º–∏–Ω ${secs} —Å–µ–∫`;
            }

            formatTotalTime(seconds) {
                if (seconds < 60) return `${seconds} —Å–µ–∫`;
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins} –º–∏–Ω ${secs} —Å–µ–∫`;
            }

            formatAverageTime(seconds) {
                if (seconds < 60) return `${Math.round(seconds)} —Å–µ–∫`;
                const mins = Math.floor(seconds / 60);
                const secs = Math.round(seconds % 60);
                return `${mins} –º–∏–Ω ${secs} —Å–µ–∫`;
            }

            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            async setupServiceWorker() {
                if ('serviceWorker' in navigator) {
                    try {
                        const registration = await navigator.serviceWorker.register('service-worker.js');
                        console.log('SW registered');
                        
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
                        this.checkForUpdates(registration);
                        
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
                        setInterval(() => {
                            this.checkForUpdates(registration);
                        }, 5 * 60 * 1000);
                        
                    } catch (error) {
                        console.log('SW registration failed:', error);
                    }
                }
            }

            async checkForUpdates(registration) {
                try {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                    const response = await fetch('/liteplank/version.json', {
                        cache: 'no-cache',
                        headers: {
                            'Cache-Control': 'no-cache'
                        }
                    });
                    
                    if (response.ok) {
                        const serverVersion = await response.json();
                        const currentVersion = this.getCurrentVersion();
                        
                        console.log('Current version:', currentVersion);
                        console.log('Server version:', serverVersion);
                        
                        // –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–æ–≤–µ–µ
                        if (this.isNewerVersion(serverVersion, currentVersion)) {
                            console.log('New version available, updating...');
                            this.showNotification('–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', 'info');
                            
                            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä–∞
                            if (registration.waiting) {
                                registration.waiting.postMessage({ type: 'SKIP_WAITING' });
                            }
                            
                            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                            setTimeout(() => {
                                window.location.reload();
                            }, 2000);
                        }
                    }
                } catch (error) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ñ–ª–∞–π–Ω
                    console.log('Version check failed (offline mode):', error);
                }
            }

            getCurrentVersion() {
                // –í–µ—Ä—Å–∏—è –∏–∑ manifest.json –∏–ª–∏ VERSION.md
                return '1.0.4';
            }

            isNewerVersion(serverVersion, currentVersion) {
                // –ü—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ "1.0.3"
                const serverParts = serverVersion.version.split('.').map(Number);
                const currentParts = currentVersion.split('.').map(Number);
                
                for (let i = 0; i < Math.max(serverParts.length, currentParts.length); i++) {
                    const serverPart = serverParts[i] || 0;
                    const currentPart = currentParts[i] || 0;
                    
                    if (serverPart > currentPart) return true;
                    if (serverPart < currentPart) return false;
                }
                
                return false;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const litePlank = new LitePlank();
    </script>
</body>

</html>




